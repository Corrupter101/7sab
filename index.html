<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>حساب التضمين</title>
  <script src="https://code.responsivevoice.org/responsivevoice.js?key=WIZiyVE9"></script>
  <style>
    body {
      font-family: 'Tajawal', sans-serif;
      margin: 0 auto;
      padding: 0;
      background-color: black;
      color: white;
      max-width: 500px;
      zoom: 0.9;
    }
    .settings {
      position: fixed;
      top: 60px;
      right: 10px;
      background: #222;
      padding: 20px;
      border-radius: 12px;
      border: 1px solid #444;
      z-index: 999;
      display: none;
      width: 260px;
      box-shadow: 0 0 12px rgba(255,255,255,0.2);
    }
    .player {
      background: #222;
      padding: 15px;
      margin: 10px;
      border-radius: 10px;
    }
    input[type="text"], input[type="number"] {
      padding: 8px;
      margin: 5px;
      width: 30%;
    }
    button {
      padding: 8px 12px;
      margin: 5px;
    }
    #toggleSettings {
      position: fixed;
      top: 10px;
      right: 10px;
      z-index: 1001;
      background: #555;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 8px;
    }
  </style>
</head>
<body>

<button id="toggleSettings">⚙️</button>
<div class="settings" id="settingsPanel">
  <label><input type="checkbox" id="soundToggle" checked> تشغيل الصوت</label><br>
  <label><input type="checkbox" id="darkModeToggle" checked> الوضع الداكن</label><br>
  <label>لون الخلفية: <input type="color" id="bgColorPicker" value="#000000"></label><br>
  <label>اختيار الخط:
    <select id="fontSelector">
      <option value="Tajawal" selected>Tajawal</option>
      <option value="Arial">Arial</option>
      <option value="Cairo">Cairo</option>
      <option value="Amiri">Amiri</option>
    </select>
  </label><br>
  <button id="resetSettings">🔄 استعادة الإعدادات الافتراضية</button>
  <button id="applySettings">✅ تطبيق</button>
  <button id="cancelSettings">❌ إلغاء</button>
</div>

<div id="playersContainer">
  <div class="player">
    <input type="text" placeholder="اسم اللاعب">
    <input type="number" placeholder="النقاط">
    <button onclick="adjustPoints(this, 1)">➕</button>
    <button onclick="adjustPoints(this, -1)">➖</button>
    <span>0</span>
  </div>
  <div class="player">
    <input type="text" placeholder="اسم اللاعب">
    <input type="number" placeholder="النقاط">
    <button onclick="adjustPoints(this, 1)">➕</button>
    <button onclick="adjustPoints(this, -1)">➖</button>
    <span>0</span>
  </div>
  <div class="player">
    <input type="text" placeholder="اسم اللاعب">
    <input type="number" placeholder="النقاط">
    <button onclick="adjustPoints(this, 1)">➕</button>
    <button onclick="adjustPoints(this, -1)">➖</button>
    <span>0</span>
  </div>
  <div class="player">
    <input type="text" placeholder="اسم اللاعب">
    <input type="number" placeholder="النقاط">
    <button onclick="adjustPoints(this, 1)">➕</button>
    <button onclick="adjustPoints(this, -1)">➖</button>
    <span>0</span>
  </div>
</div>

<div style="text-align:center; margin: 20px;">
  <button onclick="announceResults()">📢 نشر النتائج</button>
  <button onclick="resetAllScores()">🔁 إعادة تعيين النقاط</button>
  <button onclick="resetAllNames()">🔄 إعادة تعيين الأسماء</button>
</div>

<script>
function adjustPoints(btn, direction) {
  const playerDiv = btn.closest('.player');
  const input = playerDiv.querySelector('input[type="number"]');
  const span = playerDiv.querySelector('span');
  let current = parseInt(span.textContent) || 0;
  let change = parseInt(input.value) || 0;
  current += direction * change;
  span.textContent = `${current}`;
  input.value = '';
}

function announceResults() {
  let texts = [];
  document.querySelectorAll('.player').forEach(player => {
    const name = player.querySelector('input[type="text"]').value || 'لاعب';
    const score = player.querySelector('span').textContent;
    texts.push(`${name} لديه ${score}`);
  });
  responsiveVoice.speak(texts.join('، '), 'Arabic Male');
}

function resetAllScores() {
  document.querySelectorAll('.player').forEach(player => {
    player.querySelector('span').textContent = '0';
    player.querySelector('input[type="number"]').value = '';
  });
}

function resetAllNames() {
  document.querySelectorAll('.player').forEach(player => {
    player.querySelector('input[type="text"]').value = '';
  });
}

document.addEventListener('DOMContentLoaded', () => {
  document.body.style.backgroundColor = '#000000';
  document.body.style.color = '#ffffff';

  document.getElementById('toggleSettings').addEventListener('click', () => {
    const panel = document.getElementById('settingsPanel');
    panel.style.display = (panel.style.display === 'block') ? 'none' : 'block';
  });

  document.getElementById('cancelSettings').addEventListener('click', () => {
    document.getElementById('settingsPanel').style.display = 'none';
  });

  document.getElementById('applySettings').addEventListener('click', () => {
    localStorage.setItem('soundEnabled', document.getElementById('soundToggle').checked);
    localStorage.setItem('darkModeEnabled', document.getElementById('darkModeToggle').checked);
    localStorage.setItem('bgColor', document.getElementById('bgColorPicker').value);
    localStorage.setItem('fontFamily', document.getElementById('fontSelector').value);
    location.reload();
  });

  document.getElementById('resetSettings').addEventListener('click', () => {
    localStorage.clear();
    location.reload();
  });

  if (localStorage.getItem('soundEnabled')) {
    const soundEnabled = localStorage.getItem('soundEnabled') === 'true';
    document.getElementById('soundToggle').checked = soundEnabled;
  }
  if (localStorage.getItem('darkModeEnabled')) {
    const darkModeEnabled = localStorage.getItem('darkModeEnabled') === 'true';
    document.getElementById('darkModeToggle').checked = darkModeEnabled;
    document.body.style.backgroundColor = darkModeEnabled ? 'black' : 'white';
    document.body.style.color = darkModeEnabled ? 'white' : 'black';
  }
  if (localStorage.getItem('bgColor')) {
    document.body.style.backgroundColor = localStorage.getItem('bgColor');
    document.getElementById('bgColorPicker').value = localStorage.getItem('bgColor');
  }
  if (localStorage.getItem('fontFamily')) {
    document.body.style.fontFamily = localStorage.getItem('fontFamily');
    document.getElementById('fontSelector').value = localStorage.getItem('fontFamily');
  }
});
</script>

</body>
</html>