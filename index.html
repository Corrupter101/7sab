<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>حساب التضمين</title>
  <script src="https://code.responsivevoice.org/responsivevoice.js?key=WIZiyVE9"></script>
<script>
function resetPlayers() {
  if (!confirm("هل أنت متأكد من رغبتك في إدخال لاعبين جدد؟ سيتم حذف كل البيانات الحالية.")) return;
  players = [
    { name: "", total: 0 },
    { name: "", total: 0 },
    { name: "", total: 0 },
    { name: "", total: 0 }
  ];
  document.getElementById("name1").value = "";
  document.getElementById("name2").value = "";
  document.getElementById("name3").value = "";
  document.getElementById("name4").value = "";
  document.getElementById("rankingList").innerHTML = "";
  document.getElementById("roundHistory").innerHTML = "";
  document.getElementById("score1").value = 0;
  document.getElementById("score2").value = 0;
  document.getElementById("score3").value = 0;
  document.getElementById("score4").value = 0;
  document.getElementById("newGameBtn").style.display = "none";
}
</script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #121212;
      color: #ffffff;
      padding: 20px;
      direction: rtl;
      text-align: center;
    }
    h1 {
      color: #4dabf7;
      margin-bottom: 10px;
    }
    table {
      width: 100%;
      margin-top: 20px;
      border-collapse: collapse;
      background-color: #1e1e1e;
    }
    th, td {
      padding: 10px;
      border: 1px solid #333;
    }
    input[type="text"], input[type="number"] {
      width: 90%;
      padding: 8px;
      font-size: 16px;
      text-align: center;
      background-color: #2a2a2a;
      color: #fff;
      border: 1px solid #444;
    }
    button {
      padding: 10px 20px;
      margin: 10px 5px;
      font-size: 16px;
      cursor: pointer;
      border: none;
      border-radius: 6px;
      color: #fff;
    }
    button:hover {
      opacity: 0.9;
    }
    button:nth-of-type(1) { background-color: #28a745; }
    button:nth-of-type(2) { background-color: #17a2b8; }
    button:nth-of-type(3) { background-color: #dc3545; }
    .ranking {
      margin-top: 30px;
    }
    .history {
      margin-top: 30px;
      text-align: right;
      background-color: #1e1e1e;
      padding: 10px;
      border-radius: 6px;
    }
    .history h3 {
      color: #aaa;
      font-size: 18px;
      margin-bottom: 10px;
    }
    .history ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .history li {
      margin-bottom: 5px;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <h1>حساب التضمين</h1>

  <table>
    <tr>
      <th>اسم اللاعب</th>
      <th>النقاط</th>
    </tr>
    <tr>
  <td><input type="text" id="name1" placeholder=""></td>
  <td><input type="number" id="score1" value="0" onfocus="this.select()"></td>
</tr>
    <tr>
  <td><input type="text" id="name2" placeholder=""></td>
  <td><input type="number" id="score2" value="0" onfocus="this.select()"></td>
</tr>
    <tr>
  <td><input type="text" id="name3" placeholder=""></td>
  <td><input type="number" id="score3" value="0" onfocus="this.select()"></td>
</tr>
    <tr>
  <td><input type="text" id="name4" placeholder=""></td>
  <td><input type="number" id="score4" value="0" onfocus="this.select()"></td>
</tr>
  </table>

  <button onclick="addRound()">➕ إضافة الجولة</button>
  <button onclick="announceResults()">🔊 إعلان النتائج</button>
  <button onclick="newGame()" id="newGameBtn" style="display:none;">🔁 لعبة جديدة</button>
  <button onclick="resetPlayers()" style="background-color:#ffc107;">👥 لاعبين جدد</button>

  <div class="ranking">
    <h2>الترتيب الحالي</h2>
    <ol id="rankingList"></ol>
  </div>

  <div class="history">
    <h3>سجل الجولات</h3>
    <ul id="roundHistory"></ul>
  </div>

  <script>
    let players = [
        { name: "", total: 0 },
        { name: "", total: 0 },
        { name: "", total: 0 },
        { name: "", total: 0 }
      ];

    function addRound() {
      const roundDetails = [];
      players[0].name = document.getElementById("name1").value;
      players[1].name = document.getElementById("name2").value;
      players[2].name = document.getElementById("name3").value;
      players[3].name = document.getElementById("name4").value;

      players[0].total += parseInt(document.getElementById("score1").value) || 0;
      players[1].total += parseInt(document.getElementById("score2").value) || 0;
      players[2].total += parseInt(document.getElementById("score3").value) || 0;
      players[3].total += parseInt(document.getElementById("score4").value) || 0;

      players.sort((a, b) => a.total - b.total);

      const rankingList = document.getElementById("rankingList");
      rankingList.innerHTML = "";
      let someoneLost = false;

      players.forEach(player => {
        const li = document.createElement("li");
        li.textContent = `${player.name}: ${player.total}`;
        rankingList.appendChild(li);
        roundDetails.push(`${player.name}: ${player.total}`);

        if (player.total >= 159) {
          const lossMessage = `${player.name} خسر اللعبة بعدد ${player.total} نقطة`;
          responsiveVoice.speak(lossMessage, "Arabic Male");
          someoneLost = true;
        }
      });

      if (someoneLost) {
        document.getElementById("newGameBtn").style.display = "inline-block";
      }

      document.getElementById("score1").value = 0;
      document.getElementById("score2").value = 0;
      document.getElementById("score3").value = 0;
      document.getElementById("score4").value = 0;

      const historyList = document.getElementById("roundHistory");
      const roundItem = document.createElement("li");
      roundItem.textContent = `جولة ${historyList.children.length + 1}: ` + roundDetails.join(" - ");
      historyList.appendChild(roundItem);
    }

    function announceResults() {
      let speechText = "";
      players.forEach((player) => {
        speechText += `${player.name} ${player.total} `;
      });
      responsiveVoice.speak(speechText, "Arabic Male");
    }

    function newGame() {
      players = [
        { name: "", total: 0 },
        { name: "", total: 0 },
        { name: "", total: 0 },
        { name: "", total: 0 }
      ];
      document.getElementById("name1").value = "";
      document.getElementById("name2").value = "";
      document.getElementById("name3").value = "";
      document.getElementById("name4").value = "";
      document.getElementById("rankingList").innerHTML = "";
      document.getElementById("roundHistory").innerHTML = "";
      document.getElementById("newGameBtn").style.display = "none";
    }
  </script>
<p style="margin-top:40px; color:#888; font-size:14px;">جميع الحقوق محفوظة لحزب الكهف 2025</p>
</html>
